<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FiCi Chatbot</title>
<style>
  /* ===== THEME ===== */
  :root{
    --accent: #2f7dff;        /* ganti warna utama di sini */
    --accent-2: #6aa7ff;
    --bg: #f6f7fb;
    --card: #ffffff;
    --text: #1f2937;
    --muted: #6b7280;
    --user: #e8f0ff;
    --bot: #f2f4f7;
    --radius: 16px;
    --shadow: 0 10px 25px rgba(0,0,0,.07);
    --ring: 0 0 0 3px rgba(47,125,255,.25);
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    background: var(--bg); color: var(--text);
  }

  .wrap{
    max-width: 420px; margin: 14px auto; padding: 0 10px;
  }

  .card{
    background: var(--card); border-radius: var(--radius); box-shadow: var(--shadow);
    overflow:hidden; display:flex; flex-direction:column; height: 560px;
    border: 1px solid #eef0f4;
  }

  .header{
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    color: #fff; padding: 14px 16px; display:flex; align-items:center; gap:10px;
  }
  .logo{
    width: 34px; height: 34px; border-radius:10px; background: rgba(255,255,255,.2);
    display:grid; place-items:center; font-weight:700;
  }
  .title{margin:0; font-size: 16px; font-weight:700; line-height:1.1}
  .subtitle{margin:2px 0 0; font-size:12px; opacity:.95}

  .messages{
    padding: 14px; overflow:auto; background: #fbfcfe; flex:1;
  }
  .msg{
    max-width: 90%; padding: 10px 12px; border-radius: 14px; margin: 8px 0;
    line-height:1.4; font-size: 14px; white-space: pre-wrap;
    box-shadow: 0 2px 8px rgba(0,0,0,.04);
  }
  .bot{ background: var(--bot); border-top-left-radius: 6px; }
  .user{ background: var(--user); border-top-right-radius: 6px; margin-left:auto; }

  .chips{ display:flex; gap:8px; flex-wrap:wrap; margin: 2px 0 8px; }
  .chip{
    padding:6px 10px; font-size:12px; border-radius:999px; background:#eef2ff; color:#1e3a8a;
    border:1px solid #dbe6ff; cursor:pointer; user-select:none;
  }
  .chip:hover{ filter: brightness(0.98); }

  .footer{
    border-top: 1px solid #eef0f4; padding: 10px; background:#fff; display:flex; gap:8px;
  }
  .input{
    flex:1; padding:12px 12px; border-radius: 12px; border: 1px solid #d9dee8; outline:none;
  }
  .input:focus{ box-shadow: var(--ring); border-color: var(--accent-2); }
  .btn{
    background: var(--accent); color:#fff; border:none; border-radius:12px; padding:12px 16px; font-weight:600; cursor:pointer;
  }
  .btn:hover{ filter: brightness(.98); }
  .muted{ color: var(--muted); font-size: 12px; }

  /* Mobile fill */
  @media (max-width: 480px){
    .wrap{padding:0; margin:0}
    .card{height: calc(100vh - 16px); border-radius: 0;}
  }

  /* Nice scrollbar in iframe */
  .messages::-webkit-scrollbar{ width:10px; }
  .messages::-webkit-scrollbar-thumb{ background:#e5e7eb; border-radius:20px; }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="application" aria-label="FiCi Chatbot">
      <div class="header">
        <div class="logo" aria-hidden="true">Fi</div>
        <div>
          <h1 class="title">FiCi Chatbot</h1>
          <p class="subtitle">Membantu belajar di FiCi Academy</p>
        </div>
      </div>

      <div id="messages" class="messages">
        <div class="chips" id="chips">
          <span class="chip" data-text="materi">Materi</span>
          <span class="chip" data-text="fici">Apa itu FiCi?</span>
          <span class="chip" data-text="nilai">Nilai FiCi</span>
          <span class="chip" data-text="literasi politik">Literasi Politik</span>
          <span class="chip" data-text="kohesi sosial">Kohesi Sosial</span>
          <span class="chip" data-text="tugas">Tugas</span>
          <span class="chip" data-text="kuis">Kuis</span>
          <span class="chip" data-text="bantuan">Bantuan</span>
        </div>
        <div class="msg bot">Halo! Saya Chatbot FiCi. Ketik: halo, materi, fici, motivasi, bantuan.</div>
      </div>

      <form id="form" class="footer" autocomplete="off">
        <input id="input" class="input" type="text" placeholder="Tanya saya (contoh: materi, fici)" aria-label="Ketik pesan" />
        <button class="btn" type="submit">Kirim</button>
      </form>
    </div>
    <div class="muted" style="padding:6px 2px; text-align:center;">v1 · tombol cepat • responsif</div>
  </div>

<script>
  const $messages = document.getElementById('messages');
  const $form = document.getElementById('form');
  const $input = document.getElementById('input');
  const $chips = document.getElementById('chips');

  function addMsg(text, who='bot'){
    const div = document.createElement('div');
    div.className = `msg ${who}`;
    div.textContent = text;
    $messages.appendChild(div);
    $messages.scrollTop = $messages.scrollHeight;
  }

  async function ask(text){
    addMsg(text, 'user');
    try{
      const res = await fetch('/api/chat', {
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ message: text, text: text, query: text })
      });
      const data = await res.json();
      addMsg(data.reply || 'Maaf, saya belum paham. Coba ketik: bantuan.', 'bot');
    }catch(e){
      addMsg('Terjadi kendala koneksi. Coba lagi.', 'bot');
    }
  }

  $form.addEventListener('submit', e=>{
    e.preventDefault();
    const text = $input.value.trim();
    if(!text) return;
    $input.value = '';
    ask(text);
  });

  $chips.addEventListener('click', e=>{
    const el = e.target.closest('.chip');
    if(!el) return;
    ask(el.dataset.text);
  });
</script>
</body>
</html>
